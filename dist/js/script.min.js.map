{"version":3,"sources":["script.min.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","carsContainer","document","getElementById","carBox","getElementsByClassName","scaleWidth","offsetWidth","semaphore","light","xml","XMLHttpRequest","open","onload","jsonData","JSON","parse","responseText","carsData","cars","distance","ratio","trafficLightsPos","traffic_lights","position","trafficLightsTime","duration","speedLimit","speed_limits","style","left","colours","current","status","data","carItem","carName","name","carPic","image","carSpeed","speed","carDesc","description","insertAdjacentHTML","renderCars","slSign","limitNumb","speedLimits","setInterval","background","addEventListener","imgSrc","this","getElementsByTagName","src","table","rows","firstTd","cells","img","createElement","hasChildNodes","appendChild","selectCar","alert","onerror","send","$","keyup","yourtext","val","li","removeClass","filter","str","text","RegExp","test","hide","show","addClass"],"mappings":"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","file":"script.min.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n// $( document ).ready(function() {\n\n//vars\nvar url = 'data.json';\nvar carsContainer = document.getElementById(\"cars-list\");\nvar search = document.getElementById(\"search\");\nvar carBox = document.getElementsByClassName(\"car-box\");\nvar scaleWidth = document.getElementById('scale').offsetWidth;\nvar semaphore = document.getElementById('semaphore');\nvar light = document.getElementsByClassName('lights');\n\n//json request\nvar xml = new XMLHttpRequest();\nxml.open('GET', url);\nxml.onload = function () {\n\n    var jsonData = JSON.parse(xml.responseText),\n        carsData = jsonData.cars,\n        distance = jsonData.distance,\n        ratio = scaleWidth / distance,\n        trafficLightsPos = jsonData.traffic_lights[0].position * ratio,\n        trafficLightsTime = jsonData.traffic_lights[0].duration,\n        speedLimit = jsonData.speed_limits;\n\n    // add speed limit signs\n    function speedLimits(data) {\n\n        var slSign = '';\n\n        for (var i = 0; i < data.length; i++) {\n\n            var limitNumb = data[i].speed,\n                limitPos = data[i].position * ratio;\n\n            slSign += \"<div class='speed-sign' style='left: \" + limitPos + \"px'>\" + limitNumb + \"</div>\";\n        }\n\n        document.getElementById('scale').insertAdjacentHTML('afterend', slSign);\n    }\n\n    //traffic lights\n    semaphore.style.left = trafficLightsPos;\n\n    var colours = [\"red\", \"green\"];\n    var current = colours[0];\n    function changeLights() {\n\n        if (current == colours[0]) {\n            light[0].style.background = current;\n            light[1].style.background = 'gray';\n            current = colours[1];\n        } else if (current == colours[1]) {\n            light[0].style.background = 'gray';\n            light[1].style.background = current;\n            current = colours[0];\n        }\n    }\n\n    //display data\n    if (xml.status >= 200 && xml.status < 400) {\n\n        //display cars\n        renderCars(carsData);\n\n        //display speed limit signs\n        speedLimits(speedLimit);\n\n        //traffic lights\n        setInterval(changeLights, trafficLightsTime);\n\n        //select car\n        selectCar();\n    } else {\n        alert(\"We connected to the server, but it returned an error.\");\n    }\n};\n\nxml.onerror = function () {\n    alert(\"Connection error\");\n};\n\nxml.send();\n\n// get cars data and show them on the page\nfunction renderCars(data) {\n    var carItem = '';\n\n    for (var i = 0; i < data.length; i++) {\n\n        var carName = data[i].name,\n            carPic = data[i].image,\n            carSpeed = data[i].speed,\n            carDesc = data[i].description;\n\n        carItem += \"<li class='tb-4 bb'><div class='car-box'><div class='front'><img src=\" + carPic + \" alt='car'><span>\" + carName + \"</span></div><div class='back'><img src=\" + carPic + \" alt='car'><span>\" + carDesc + \"</span><span>Speed: \" + carSpeed + \"</span></div></div></li>\";\n    }\n\n    carsContainer.insertAdjacentHTML('beforeend', carItem);\n}\n\n//filter data from input\n$('#search').keyup(function () {\n    var yourtext = $(this).val();\n    var li = $(\"#cars-list > li.tb-4\");\n    li.removeClass('bb');\n    if (yourtext.length > 0) {\n        li.filter(function () {\n            var str = $(this).text();\n            var re = new RegExp(yourtext, \"i\");\n            var result = re.test(str);\n            if (!result) {\n                return $(this);\n            }\n        }).hide();\n    } else {\n        li.show().addClass('bb');\n    }\n});\n\n//select carbox\nfunction selectCar() {\n    for (var i = 0; i < carBox.length; i++) {\n\n        carBox[i].addEventListener(\"click\", function () {\n            //event.preventDefault();\n            var imgSrc = this.getElementsByTagName('img')[0].src;\n            var table = document.getElementById('road-distance');\n            for (var i = 0; i < table.rows.length; i++) {\n                var firstTd = table.rows[i].cells[0];\n                var img = document.createElement('img');\n                img.src = imgSrc;\n                if (!firstTd.hasChildNodes()) firstTd.appendChild(img);\n            }\n        });\n    }\n}\n\n// });\n\n},{}]},{},[1]);\n"]}